var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e="Expected a function",n=NaN,i="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt,s="object"==typeof t&&t&&t.Object===Object&&t,u="object"==typeof self&&self&&self.Object===Object&&self,p=s||u||Function("return this")(),f=Object.prototype.toString,h=Math.max,d=Math.min,y=function(){return p.Date.now()};function m(t,n,i){var r,o,a,c,l,s,u=0,p=!1,f=!1,m=!0;if("function"!=typeof t)throw new TypeError(e);function g(e){var n=r,i=o;return r=o=void 0,u=e,c=t.apply(i,n)}function w(t){var e=t-s;return void 0===s||e>=n||e<0||f&&t-u>=a}function x(){var t=y();if(w(t))return O(t);l=setTimeout(x,function(t){var e=n-(t-s);return f?d(e,a-(t-u)):e}(t))}function O(t){return l=void 0,m&&r?g(t):(r=o=void 0,c)}function j(){var t=y(),e=w(t);if(r=arguments,o=this,s=t,e){if(void 0===l)return function(t){return u=t,l=setTimeout(x,n),p?g(t):c}(s);if(f)return l=setTimeout(x,n),g(s)}return void 0===l&&(l=setTimeout(x,n)),c}return n=b(n)||0,v(i)&&(p=!!i.leading,a=(f="maxWait"in i)?h(b(i.maxWait)||0,n):a,m="trailing"in i?!!i.trailing:m),j.cancel=function(){void 0!==l&&clearTimeout(l),u=0,r=s=o=l=void 0},j.flush=function(){return void 0===l?c:O(y())},j}function v(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&f.call(t)==i}(t))return n;if(v(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=v(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var s=a.test(t);return s||c.test(t)?l(t.slice(2),s?2:8):o.test(t)?n:+t}var g=function(t,n,i){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(e);return v(i)&&(r="leading"in i?!!i.leading:r,o="trailing"in i?!!i.trailing:o),m(t,n,{leading:r,maxWait:n,trailing:o})};function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var O=function(){function t(e){babelHelpers.classCallCheck(this,t),this.element=e,this.ParallaxInterfaces=Array.from(this.element.querySelectorAll("[data-pxi-factor]")),this.hitzoneFactor=parseFloat(this.element.dataset.pxiHitzone)||t.options.hitzoneFactor,this.wrapper=null,this.prepareElement(),this.prepareParallaxInterfaces(),this.createWrapper(),this.element.setAttribute("data-pxi","init"),t.instances.push(this),t.mouseMoveInitialized||(t.initMouseMove(),t.mouseMoveInitialized=!0)}return babelHelpers.createClass(t,[{key:"createWrapper",value:function(){var t=this.element.getBoundingClientRect();this.wrapper=document.createElement("div"),this.wrapper.setAttribute("data-pxi-wrapper",""),this.element.parentNode.insertBefore(this.wrapper,this.element),this.wrapper.appendChild(this.element),this.wrapper.style.width="".concat(t.width,"px"),this.wrapper.style.height="".concat(t.height,"px")}},{key:"prepareElement",value:function(){var t=this.element.getBoundingClientRect();this.element.style.width="".concat(t.width,"px"),this.element.style.height="".concat(t.height,"px")}},{key:"prepareParallaxInterfaces",value:function(){this.ParallaxInterfaces.forEach((function(e){var n=e.getBoundingClientRect();e.style.width="".concat(n.width,"px"),e.style.height="".concat(n.height,"px"),e.cachedFactor=parseFloat(e.dataset.pxiFactor||t.options.mouseMoveFactor)}))}}],[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.options=x(x({},t.options),e),document.querySelectorAll("[data-pxi]").forEach((function(e){return new t(e)}))}},{key:"initMouseMove",value:function(){document.addEventListener("mousemove",g((function(e){t.instances.forEach((function(n){var i=n.wrapper.getBoundingClientRect(),r=Math.hypot(i.width,i.height)*n.hitzoneFactor/2,o=i.left+i.width/2,a=i.top+i.height/2;Math.hypot(e.clientX-o,e.clientY-a)<=r?requestAnimationFrame((function(){var o={x:e.clientX-i.left-i.width/2,y:e.clientY-i.top-i.height/2},a=Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2)),c=1-a/r;n.ParallaxInterfaces.forEach((function(e){var n=e.cachedFactor,i=o.x*n*c,l=o.y*n*c,s=a/r*t.options.animationTime;e.style.transform="translate(".concat(i,"px, ").concat(l,"px)"),e.style.transitionDuration="".concat(s,"ms")}))})):n.ParallaxInterfaces.forEach((function(t){t.style.transitionDuration="1000ms",t.style.transform="translate(0, 0)"}))}))}),t.options.throttleTime))}}]),t}();babelHelpers.defineProperty(O,"instances",[]),babelHelpers.defineProperty(O,"options",{throttleTime:16,hitzoneFactor:1,mouseMoveFactor:.5,animationTime:500});export{O as default};
//# sourceMappingURL=parallax-interface.js.map
