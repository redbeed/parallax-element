var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e="Expected a function",i=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof t&&t&&t.Object===Object&&t,p="object"==typeof self&&self&&self.Object===Object&&self,h=c||p||Function("return this")(),u=Object.prototype.toString,f=Math.max,d=Math.min,m=function(){return h.Date.now()};function y(t,i,n){var r,o,a,s,l,c,p=0,h=!1,u=!1,y=!0;if("function"!=typeof t)throw new TypeError(e);function w(e){var i=r,n=o;return r=o=void 0,p=e,s=t.apply(n,i)}function x(t){var e=t-c;return void 0===c||e>=i||e<0||u&&t-p>=a}function b(){var t=m();if(x(t))return M(t);l=setTimeout(b,function(t){var e=i-(t-c);return u?d(e,a-(t-p)):e}(t))}function M(t){return l=void 0,y&&r?w(t):(r=o=void 0,s)}function E(){var t=m(),e=x(t);if(r=arguments,o=this,c=t,e){if(void 0===l)return function(t){return p=t,l=setTimeout(b,i),h?w(t):s}(c);if(u)return l=setTimeout(b,i),w(c)}return void 0===l&&(l=setTimeout(b,i)),s}return i=v(i)||0,g(n)&&(h=!!n.leading,a=(u="maxWait"in n)?f(v(n.maxWait)||0,i):a,y="trailing"in n?!!n.trailing:y),E.cancel=function(){void 0!==l&&clearTimeout(l),p=0,r=c=o=l=void 0},E.flush=function(){return void 0===l?s:M(m())},E}function g(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function v(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&u.call(t)==n}(t))return i;if(g(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=g(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var c=a.test(t);return c||s.test(t)?l(t.slice(2),c?2:8):o.test(t)?i:+t}var w=function(t,i,n){var r=!0,o=!0;if("function"!=typeof t)throw new TypeError(e);return g(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),y(t,i,{leading:r,maxWait:i,trailing:o})};class x{static instances=[];static options={throttleTime:16,hitzoneFactor:1,mouseMoveFactor:.5,animationTime:500};static init(t={}){x.options={...x.options,...t},document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[data-pxi]").forEach((t=>new x(t)))}))}constructor(t){this.element=t,this.ParallaxInterfaces=Array.from(this.element.querySelectorAll("[data-pxi-factor]")),this.hitzoneFactor=parseFloat(this.element.dataset.pxiHitzone)||x.options.hitzoneFactor,this.wrapper=null,this.prepareElement(),this.prepareParallaxInterfaces(),this.createWrapper(),this.element.setAttribute("data-pxi","init"),x.instances.push(this),x.mouseMoveInitialized||(x.initMouseMove(),x.mouseMoveInitialized=!0)}createWrapper(){const t=this.element.getBoundingClientRect();this.wrapper=document.createElement("div"),this.wrapper.setAttribute("data-pxi-wrapper",""),this.element.parentNode.insertBefore(this.wrapper,this.element),this.wrapper.appendChild(this.element),this.wrapper.style.width=`${t.width}px`,this.wrapper.style.height=`${t.height}px`}prepareElement(){const t=this.element.getBoundingClientRect();this.element.style.width=`${t.width}px`,this.element.style.height=`${t.height}px`}prepareParallaxInterfaces(){this.ParallaxInterfaces.forEach((t=>{const e=t.getBoundingClientRect();t.style.width=`${e.width}px`,t.style.height=`${e.height}px`,t.cachedFactor=parseFloat(t.dataset.pxiFactor||x.options.mouseMoveFactor)}))}static initMouseMove(){document.addEventListener("mousemove",w((t=>{x.instances.forEach((e=>{const i=e.wrapper.getBoundingClientRect(),n=Math.hypot(i.width,i.height)*e.hitzoneFactor/2,r=i.left+i.width/2,o=i.top+i.height/2;Math.hypot(t.clientX-r,t.clientY-o)<=n?requestAnimationFrame((()=>{const r={x:t.clientX-i.left-i.width/2,y:t.clientY-i.top-i.height/2},o=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),a=1-o/n;e.ParallaxInterfaces.forEach((t=>{const e=t.cachedFactor,i=r.x*e*a,s=r.y*e*a,l=o/n*x.options.animationTime;t.style.transform=`translate(${i}px, ${s}px)`,t.style.transitionDuration=`${l}ms`}))})):e.ParallaxInterfaces.forEach((t=>{t.style.transitionDuration="1000ms",t.style.transform="translate(0, 0)"}))}))}),x.options.throttleTime))}}export{x as default};
//# sourceMappingURL=parallax-interface.js.map
